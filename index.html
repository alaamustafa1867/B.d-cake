<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸ‚ Happy Birthday ğŸ‚</title>
  <style>
    body {
      text-align: center;
      background: #fff0f5;
      font-family: Arial, sans-serif;
    }
    h1 {
      color: #d63384;
    }
    .cake {
      position: relative;
      margin: 30px auto;
      width: 300px;
      height: 400px;
      background: url("https://i.postimg.cc/tJzFhkN6/8089-D2-B6-0041-418-E-85-B0-8-F6-D19201-ABB.jpg") no-repeat center/cover;
      border-radius: 10px;
    }
    .candle {
      width: 6px;
      height: 40px;
      background: yellow;
      position: absolute;
    }
    .flame {
      width: 12px;
      height: 15px;
      background: orange;
      border-radius: 50%;
      position: absolute;
      top: -18px;
      left: -3px;
    }
  </style>
</head>
<body>
  <h1>H.B.D Ninjaaaa â™¥ï¸</h1>
  <div class="cake" id="cake"></div>
  <p>ğŸ¤ Ø§Ù†ÙØ®ÙŠ ÙÙŠ Ø§Ù„Ù…Ø§ÙŠÙƒ Ø¹Ù„Ø´Ø§Ù† ØªØ·ÙÙŠ Ø§Ù„Ø´Ù…ÙˆØ¹ ğŸ¤</p>

  <script>
    const cake = document.getElementById("cake");
    const cakeWidth = 300;
    const cakeHeight = 400;
    const candleCount = 29;

    // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´Ù…ÙˆØ¹ Ø¹Ù„Ù‰ 3 Ø£Ø·Ø±Ø§Ù (ÙÙˆÙ‚ - ÙŠÙ…ÙŠÙ† - Ø´Ù…Ø§Ù„)
    const topCount = Math.ceil(candleCount * 0.5); // Ù†ØµÙ‡Ù… ÙÙˆÙ‚
    const sideCount = Math.floor((candleCount - topCount) / 2); // Ø§Ù„Ø¨Ø§Ù‚ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨

    // ğŸ”¹ Ø§Ù„Ø´Ù…ÙˆØ¹ ÙÙˆÙ‚ (ØµÙ Ù…Ø³ØªÙ‚ÙŠÙ…)
    for (let i = 0; i < topCount; i++) {
      const candle = document.createElement("div");
      candle.classList.add("candle");
      const flame = document.createElement("div");
      flame.classList.add("flame");
      candle.appendChild(flame);

      let x = (i / (topCount - 1)) * (cakeWidth - 20) + 10;
      let y = 40;

      candle.style.left = x + "px";
      candle.style.top = y + "px";
      cake.appendChild(candle);
    }

    // ğŸ”¹ Ø§Ù„Ø´Ù…ÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠØ³Ø±
    for (let i = 0; i < sideCount; i++) {
      const candle = document.createElement("div");
      candle.classList.add("candle");
      const flame = document.createElement("div");
      flame.classList.add("flame");
      candle.appendChild(flame);

      let x = 5;
      let y = (i / (sideCount - 1)) * 100 + 80; // Ø¹Ù„Ù‰ Ø·ÙˆÙ„ Ø§Ù„Ø·Ø±Ù
      candle.style.left = x + "px";
      candle.style.top = y + "px";
      cake.appendChild(candle);
    }

    // ğŸ”¹ Ø§Ù„Ø´Ù…ÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø£ÙŠÙ…Ù†
    for (let i = 0; i < sideCount; i++) {
      const candle = document.createElement("div");
      candle.classList.add("candle");
      const flame = document.createElement("div");
      flame.classList.add("flame");
      candle.appendChild(flame);

      let x = cakeWidth - 10;
      let y = (i / (sideCount - 1)) * 100 + 80;
      candle.style.left = x + "px";
      candle.style.top = y + "px";
      cake.appendChild(candle);
    }

    // ğŸ¤ Ø§Ù„Ù…Ø§ÙŠÙƒ
    navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
      const audioCtx = new AudioContext();
      const mic = audioCtx.createMediaStreamSource(stream);
      const analyser = audioCtx.createAnalyser();
      mic.connect(analyser);
      const data = new Uint8Array(analyser.fftSize);

      function checkBlow() {
        analyser.getByteTimeDomainData(data);
        let sum = 0;
        for (let i = 0; i < data.length; i++) {
          sum += Math.abs(data[i] - 128);
        }
        let volume = sum / data.length;
        if (volume > 15) {
          document.querySelectorAll(".flame").forEach(f => f.style.display = "none");
        }
        requestAnimationFrame(checkBlow);
      }
      checkBlow();
    });
  </script>
</body>
</html>
